我将为你把这份200页的PPT整理成一个详实的复习大纲。我会突出**核心概念定义、关键流程、重要算法、协议对比**以及**可能作为大题考点**的内容。我会结合中英文术语，帮助你精确理解。

---

### **备考策略**

1.  **理解而非死记**：考试形式是大题，纯粹背诵关键词无法应对。重点在于理解“为什么”和“如何工作”。
2.  **抓住流程和对比**：很多考点会是“描述……的过程”或“比较A和B的异同”。这部分是复习的重中之重。
3.  **图表是关键**：网络课程中的很多概念都通过图表来解释（如协议栈、封装、网络拓扑、状态机）。你不仅要看懂图，最好能自己画出简图。
4.  **计算题准备**：时延计算、吞吐量计算、IP地址/子网划分等，准备好公式和方法。

---

### **第一章：计算机网络和因特网概述 (Chapter 1: Introduction)**

这章是基础，为整个课程定下基调。

*   **[考点] 互联网的两种视角 (Two Views of the Internet)**
    *   **“具体构成”视角 (Nuts and Bolts View)**：
        *   **主机/终端系统 (Hosts/End Systems)**：运行网络应用程序的设备，位于网络边缘。
        *   **通信链路 (Communication Links)**：连接设备的物理介质，如光纤 (fiber)、铜缆 (copper)、无线电 (radio)。其传输速率称为**带宽 (bandwidth)**。
        *   **分组交换机 (Packet Switches)**：转发数据包（packets），主要是**路由器 (routers)**和**交换机 (switches)**。
        *   互联网是“网络的网络 (network of networks)”，由ISP（互联网服务提供商）互联而成。
    *   **“服务”视角 (Services View)**：
        *   为应用程序提供服务的**基础设施 (Infrastructure)**。
        *   为分布式应用提供**编程接口 (Programming Interface)**，如Socket API。

*   **[考点] 什么是协议 (What is a Protocol?)**
    *   **核心定义**：协议定义了在网络实体间发送和接收的消息的**格式 (format)**和**顺序 (order)**，以及在消息传输和接收时所采取的**行动 (actions)**。
    *   类比人类协议帮助理解，如问时间、打招呼。

*   **[考点] 网络核心 (The Network Core)**
    *   **电路交换 (Circuit Switching)**：
        *   为通信双方**预留专用资源**（如电话网络）。
        *   资源在通话期间被独占，即使没有数据传输也处于空闲状态（no sharing）。
        *   性能有保证（guaranteed performance）。
    *   **分组交换 (Packet Switching)**：
        *   数据被拆分成**数据包 (packets)**。
        *   资源是**共享的**，按需使用，效率更高。
        *   采用**存储转发 (store-and-forward)**机制：路由器必须完整接收一个数据包后才能向下一个链路转发。
    *   **对比：电路交换 vs. 分组交换**：这是经典考题。从资源分配、效率、性能保障、拥塞处理等方面比较。

*   **[考点] 分组交换中的关键问题**
    *   **时延 (Delay)**：一个分组在网络中传输的总时延由四部分组成。**必须掌握每一部分的定义和计算！**
        1.  **处理时延 (Processing Delay, d_proc)**：检查分组头部、确定输出链路等。
        2.  **排队时延 (Queueing Delay, d_queue)**：在输出链路队列中等待传输的时间，受拥塞程度影响。
        3.  **传输时延 (Transmission Delay, d_trans)**：将整个分组推向链路所需的时间。**公式：`d_trans = L / R`** (L=分组长度, R=链路带宽)。
        4.  **传播时延 (Propagation Delay, d_prop)**：信号在物理介质中传播所需的时间。**公式：`d_prop = d / s`** (d=物理链路长度, s=传播速度)。
    *   **丢包 (Packet Loss)**：当队列（缓冲区）已满，新到达的分组会被丢弃。
    *   **吞吐量 (Throughput)**：发送方和接收方之间数据传输的实际速率。端到端路径的吞吐量由**瓶颈链路 (bottleneck link)**决定，即路径上速率最低的链路。

*   **[考点] 协议层次与服务模型 (Protocol Layers, Service Models)**
    *   **为什么分层 (Why layering?)**：应对复杂系统设计的策略，实现模块化，便于维护和更新。
    *   **互联网协议栈 (Internet Protocol Stack)**：必须记住这五层及其核心功能。
        1.  **应用层 (Application)**：为网络应用服务 (HTTP, SMTP, DNS)。
        2.  **传输层 (Transport)**：进程到进程的数据传输 (TCP, UDP)。
        3.  **网络层 (Network)**：从源到目的地的路由数据报 (IP)。
        4.  **链路层 (Link)**：相邻网络节点间的数据传输 (Ethernet, Wi-Fi)。
        5.  **物理层 (Physical)**：在线路上传输比特。
    *   **封装 (Encapsulation)**：数据在发送端从上到下逐层添加报头(Header)的过程。在应用层是消息(Message)，传输层是报文段(Segment)，网络层是数据报(Datagram)，链路层是帧(Frame)。接收端则进行解封装。**(P21的俄罗斯套娃图很重要)**。

### **第二章：应用层 (Application Layer)**

*   **[考点] 网络应用体系结构 (Network Application Architectures)**
    *   **客户/服务器 (Client-Server)**：服务器是“永远在线”的主机，有固定IP地址。客户端主动联系服务器。
    *   **对等网络 (Peer-to-Peer, P2P)**：没有永远在线的服务器。任意端系统可以直接通信。具有**自扩展性 (self-scalability)**。

*   **[考点] 进程通信与Socket**
    *   **Socket**：是应用进程与传输层协议之间的接口，类似于一扇门。
    *   **进程寻址**：为了让一个进程接收消息，它必须有一个标识符。在网络中，这个标识符是 **IP地址 + 端口号 (Port Number)**。

*   **[考点] 应用层协议详解**
    *   **HTTP (HyperText Transfer Protocol)**：
        *   Web的应用层协议，使用**TCP**。
        *   **无状态 (Stateless)**：服务器不保存关于过去客户端请求的任何信息。
        *   **连接类型**：
            *   **非持久性HTTP (Non-persistent HTTP)**：每个对象（如图片）的传输都需要一个新的TCP连接。**响应时间 = 2 * RTT + 文件传输时间**。(RTT是往返时间)
            *   **持久性HTTP (Persistent HTTP)**：单个TCP连接可以传输多个对象。
        *   **HTTP请求方法**：GET, POST, HEAD, PUT等。
        *   **HTTP响应状态码**：200 OK, 301 Moved Permanently, 404 Not Found, 505 HTTP Version Not Supported。
    *   **电子邮件 (E-mail)**：
        *   **三个主要组件**：用户代理 (User Agents)，邮件服务器 (Mail Servers)，SMTP协议。
        *   **SMTP (Simple Mail Transfer Protocol)**：用于从发送方邮件服务器到接收方邮件服务器**推送 (push)**邮件。
        *   **邮件访问协议 (Mail Access Protocols)**：用于从邮件服务器**拉取 (pull)**邮件，如 POP3, IMAP。
    *   **DNS (Domain Name System)**：
        *   **核心服务**：将主机名翻译成IP地址。
        *   **为什么是分布式的？** 解决了单点故障、流量、距离和维护问题，具有**可扩展性 (scalability)**。
        *   **层次化结构**：根DNS服务器 (Root)、顶级域DNS服务器 (TLD)、权威DNS服务器 (Authoritative)。
        *   **两种查询方式**：**迭代查询 (Iterated Query)** 和 **递归查询 (Recursive Query)**。**（P42, P43的图解非常重要，是高频考点）**
        *   **DNS记录 (Records)**：A (地址), NS (域名服务器), CNAME (别名), MX (邮件交换)。
    *   **文件分发：CS vs. P2P**
        *   分析分发一个大小为F的文件给N个用户的总时间。
        *   **CS模式**：时间至少为 `max{NF/us, F/dmin}`。
        *   **P2P模式**：时间至少为 `max{F/us, F/dmin, NF/(us + Σui)}`。
        *   **核心结论**：P2P模式下，每个新加入的对等方都贡献上传能力，因此系统分发能力随N线性增长，扩展性远超CS模式。
    *   **DASH (Dynamic, Adaptive Streaming over HTTP)**
        *   **核心思想**：视频文件切分成多个块 (chunks)，每个块有多种不同速率的编码版本。客户端根据当前网络带宽，动态地请求最合适速率的视频块。**智能在客户端**。

### **第三章：传输层 (Transport Layer)**

*   **[考点] 传输层服务**
    *   提供**进程到进程 (process-to-process)** 的**逻辑通信 (logical communication)**。
    *   **对比网络层**：网络层提供**主机到主机 (host-to-host)** 的通信。

*   **[考点] 多路复用与多路分用 (Multiplexing/Demultiplexing)**
    *   **复用 (Multiplexing)**：在发送端，从多个socket收集数据块，并为它们封装上头部信息。
    *   **分用 (Demultiplexing)**：在接收端，使用头部信息将接收到的报文段交付给正确的socket。
    *   **UDP的分用**：基于**目的端口号**。
    *   **TCP的分用**：基于**四元组 (4-tuple)**：源IP、源端口、目的IP、目的端口。

*   **[考点] UDP (User Datagram Protocol)**
    *   **特点**：“无附加服务 (no-frills)”的协议，提供“尽力而为 (best-effort)”的服务。
    *   **优点 (Why UDP?)**：无连接建立开销、无连接状态、头部开销小、无拥塞控制（应用可按自己意愿发送数据）。

*   **[考点] 可靠数据传输原理 (Principles of Reliable Data Transfer, rdt)**
    *   这是理论核心，理解其演进过程。
    *   **rdt 1.0**：假设底层信道完全可靠。
    *   **rdt 2.0**：引入**校验和 (checksum)**检测位错误，并使用**ACK/NAK**进行反馈。
    *   **rdt 2.1**：为解决ACK/NAK可能损坏的问题，引入**序列号 (sequence number)**。
    *   **rdt 3.0**：为解决分组丢失问题，引入**计时器 (timer)**，实现超时重传。
    *   **流水线 (Pipelining)**：为了提高信道利用率，允许发送方在未收到确认的情况下连续发送多个分组。引出了两种协议：
        *   **回退N步 (Go-Back-N, GBN)**：接收方只按序接收，丢弃所有失序分组。发送方使用**累积确认 (cumulative ACK)**。
        *   **选择重传 (Selective Repeat, SR)**：接收方缓存失序的分组，只要求重传丢失的分组。发送方对每个分组进行**独立确认 (individual ACK)**。
``
*   **[考点] TCP (Transmission Control Protocol)**
    *   **特点**：面向连接、可靠的、字节流服务。
    *   **TCP报文段结构**：重点关注**序列号 (Sequence number)**、**确认号 (Acknowledgement number)**、**接收窗口 (Receive window)**、标志位 (Flags: SYN, ACK, FIN, RST)。
    *   **可靠数据传输**：通过序列号、累积确认、超时重传和**快速重传 (Fast Retransmit)**（收到3个重复ACK）实现。
    *   **流量控制 (Flow Control)**：防止发送方淹没接收方。通过接收方在报文段的**接收窗口 (rwnd)**字段中通告其可用缓冲区大小来实现。
    *   **TCP连接管理 (3次握手和4次挥手)**
        *   **3次握手 (3-way Handshake)**：建立连接。
            1.  Client -> Server: **SYN**
            2.  Server -> Client: **SYNACK**
            3.  Client -> Server: **ACK**
            **（P84的图和状态变化 LISTEN, SYNSENT, ESTAB 等必须掌握）**
    *   **TCP拥塞控制 (Congestion Control)**：防止TCP流量压垮网络。
        *   **AIMD (Additive Increase, Multiplicative Decrease)**：加性增、乘性减。当网络通畅时，拥塞窗口(cwnd)线性增加；当检测到丢包时，cwnd减半。表现为“锯齿状”行为。
        *   **慢启动 (Slow Start)**：连接开始时，cwnd指数级增长，直到达到一个**阈值 (ssthresh)**。
        *   **对拥塞的两种反应**：
            1.  **超时 (timeout)**：cwnd降为1，ssthresh设为当前cwnd的一半，重新进入慢启动。
            2.  **3个重复ACK**：**快速恢复 (Fast Recovery)**。ssthresh设为当前cwnd的一半，cwnd也设为一半，然后进入加性增阶段。

### **第四/五章：网络层 (Network Layer)**

*   **[考点] 数据平面与控制平面 (Data Plane & Control Plane)**
    *   **数据平面 (Data Plane)**：每个路由器的本地功能，负责**转发 (forwarding)**，即将分组从输入端口移到输出端口。
    *   **控制平面 (Control Plane)**：网络范围的逻辑，负责**路由 (routing)**，即决定分组从源到目的地的路径。

*   **[考点] 路由器工作原理**
    *   核心是根据分组的**目的IP地址**，在**转发表 (forwarding table)**中查找匹配的条目，以决定输出端口。
    *   **最长前缀匹配 (Longest Prefix Matching)**：当一个地址匹配多个表项时，选择前缀最长的那个。**(P97-P100的例子是必考题型)**

*   **[考点] IP协议 (Internet Protocol)**
    *   **IPv4数据报格式**：重点字段：版本 (ver)、头部长度 (len)、服务类型 (type of service)、总长度、标识/标志/片偏移（用于分片）、**生存时间 (TTL)**、**协议 (protocol)**（指明上层协议，如TCP=6, UDP=17）、头部校验和、源/目的IP地址。
    *   **IP分片 (Fragmentation)**：当IP数据报大于链路的MTU时，路由器会将其分片。
    *   **IP寻址 (Addressing)**
        *   **子网 (Subnet)**：一个组织内部的网络，其中的设备无需通过路由器即可互达。
        *   **CIDR (Classless InterDomain Routing)**：无类域间路由，表示法为 `a.b.c.d/x`，x表示子网掩码的位数。
    *   **获取IP地址的方式**
        *   **主机获取IP**：通过**DHCP (Dynamic Host Configuration Protocol)**。理解DHCP的四步交互过程：**Discover, Offer, Request, ACK**。
        *   **网络获取IP块**：从其ISP处获得一个地址块，并可以进一步划分。
    *   **NAT (Network Address Translation)**：
        *   **目的**：缓解IPv4地址耗尽问题。
        *   **原理**：在私有网络边缘的NAT路由器维护一个NAT转换表，将 (私有源IP, 源端口) 映射到 (公网IP, 新端口)。**（P111的图解流程很重要）**
    *   **IPv6**：
        *   **主要变化**：地址空间巨大 (128位)、简化的头部、无分片/重组、无头部校验和。
        *   **过渡机制**：**隧道技术 (Tunneling)**，将IPv6数据报作为载荷封装在IPv4数据报中。

*   **[考点] 路由算法 (Routing Algorithms)**
    *   **分类**：
        *   **全局 (Global) vs. 分散 (Decentralized)**：LS算法是全局的，DV算法是分散的。
        *   **静态 (Static) vs. 动态 (Dynamic)**
    *   **链路状态算法 (Link-State, LS)**：
        *   代表：**Dijkstra算法**。
        *   所有节点都知道整个网络的拓扑和链路成本。
        *   计算从一个节点到所有其他节点的最短路径。**（能手动在图上模拟Dijkstra算法的执行过程）**
    *   **距离向量算法 (Distance-Vector, DV)**：
        *   代表：**Bellman-Ford方程**。
        *   每个节点只知道其邻居，通过与邻居交换距离向量（到所有其他节点的成本估计）来更新自己的路由表。
        *   问题：**无穷计数问题 (count-to-infinity problem)**。
    *   **LS vs. DV 对比**：从消息复杂性、收敛速度、健壮性等方面比较。

*   **[考点] 互联网中的路由**
    *   **自治系统 (Autonomous System, AS)**：互联网被划分为多个AS。
    *   **AS内部路由 (Intra-AS Routing)**：也叫**内部网关协议 (IGP)**。如 **RIP**, **OSPF**。
        *   **OSPF (Open Shortest Path First)**：使用LS算法，是目前最常用的IGP之一。
    *   **AS间路由 (Inter-AS Routing)**：也叫**外部网关协议 (EGP)**。事实上的标准是 **BGP (Border Gateway Protocol)**。
        *   **BGP** 是连接整个互联网的“胶水”。
        *   它是一个**路径向量协议 (path vector protocol)**，不仅仅是通告成本，而是通告到达目的网络的完整路径（AS序列，即**AS-PATH**）。
        *   BGP的核心是**策略 (policy)**，允许AS根据经济、安全等因素选择路由，而不是简单地选择最短路径。
*   **SDN (Software Defined Networking)**
    *   **核心思想**：将**控制平面**从路由器（数据平面）中分离出来，集中到一个远程的**控制器 (Controller)**上。
    *   **三大特点**：流式转发、控制/数据平面分离、网络可编程。

*   **ICMP (Internet Control Message Protocol)**
    *   用于主机和路由器之间传递网络层控制信息。
    *   常见用途：错误报告（如目的不可达）、网络探询（如`ping`命令使用的echo request/reply）。
    *   `traceroute`命令利用ICMP的TTL超时消息来实现。

### **第六章：链路层和局域网 (The Link Layer and LANs)**

*   **[考点] 链路层服务**
    *   **组帧 (Framing)**：将网络层数据报封装成帧。
    *   **差错检测 (Error Detection)**：检测传输中可能出现的比特错误。
        *   **奇偶校验 (Parity Checking)**：只能检测奇数个比特错误。二维奇偶校验可以纠正单个比特错误。
        *   **校验和 (Checksum)**：将数据视为16位整数序列求和。
        *   **CRC (Cyclic Redundancy Check)**：基于多项式除法，检错能力非常强。
*   **[考点] 多路访问协议 (Multiple Access Protocols)**
    *   **目的**：协调多个节点对共享广播信道的使用。
    *   **三大类**：
        1.  **信道划分 (Channel Partitioning)**：TDMA, FDMA。
        2.  **随机接入 (Random Access)**：ALOHA, CSMA。
            *   **CSMA/CD (Carrier Sense Multiple Access / Collision Detection)**：先听后发，边发边听。如果检测到冲突，立即停止并进行**二进制指数退避 (binary exponential backoff)**。用于**以太网 (Ethernet)**。
            *   **CSMA/CA (Carrier Sense Multiple Access / Collision Avoidance)**：尽力避免冲突。在无线网络中，由于“隐藏终端”问题，冲突检测困难。因此采用**RTS/CTS**交换来预约信道。用于 **Wi-Fi (802.11)**。
        3.  **轮流 (Taking Turns)**：轮询 (Polling)，令牌传递 (Token passing)。

*   **[考点] LAN地址 (MAC地址)**
    *   **MAC地址**是链路层地址，长度为48位，通常固化在网卡的ROM中。
    *   用于在**同一个局域网**内，将帧从一个接口发送到另一个接口。
    *   **对比IP地址**：IP地址是网络层地址，用于在全球范围内标识主机。IP地址是逻辑的、分层的；MAC地址是物理的、扁平的。

*   **[考点] ARP (Address Resolution Protocol)**
    *   **功能**：在已知一个主机的**IP地址**的情况下，解析出其**MAC地址**。
    *   **工作过程**：A想知道B的MAC地址，A会**广播 (broadcast)**一个ARP请求，其中包含B的IP地址。B收到后，会**单播 (unicast)**一个ARP响应，其中包含自己的MAC地址。

*   **[考点] 以太网 (Ethernet)** 和 **交换机 (Switches)**
    *   **交换机**是链路层设备。
    *   **透明性**：交换机的存在对主机是透明的。
    *   **自学习 (Self-learning)**：交换机通过检查收到的帧的**源MAC地址**来学习哪个主机位于哪个端口。它维护一个**交换机表 (switch table)**。
    *   **转发/过滤 (Forwarding/Filtering)**：
        *   如果目的MAC地址在表中，且目的端口与源端口不同，则**转发**到该端口。
        *   如果目的端口与源端口相同，则**过滤**（丢弃）该帧。
        *   如果目的MAC地址不在表中，则**泛洪 (flood)**，即向除源端口外的所有端口转发。
    *   **交换机 vs. 路由器对比**：这是非常重要的考点。
        *   **层级**：交换机是L2设备，路由器是L3设备。
        *   **处理单元**：交换机处理帧，路由器处理数据报。
        *   **地址**：交换机使用MAC地址，路由器使用IP地址。
        *   **表建立**：交换机自学习，路由器运行路由算法。

# 第七章
### **第一部分：无线网络 (Wireless Networks)**

这部分主要考察无线链路的物理特性以及在此基础上设计的协议。

#### **1. 无线网络分类 (Wireless Network Taxonomy)**
*   **考点**：理解无线网络的两种划分维度：**传输范围 (单跳 vs 多跳)** 和 **基础设施 (有 vs 无)**。
*   **重点记忆**：
    *   **有基础设施 / 单跳**：最常见的模式，如 **WiFi (通过AP)**、蜂窝网络。设备连接到基站/AP，再由基站/AP接入互联网。
    *   **有基础设施 / 多跳**：**无线Mesh网络**。节点之间可以相互中继，最终连接到有线网络。
    *   **无基础设施 / 单跳**：**蓝牙**、Ad hoc网络。设备间直接通信，不经过中心节点。
    *   **无基础设施 / 多跳**：移动自组织网络 (**MANET**)、车载自组织网络 (**VANET**)。节点本身组成网络，相互转发数据。

#### **2. 无线链路特性 (Wireless Link Characteristics)**
*   **考点**：这是本章的基础，务必理解无线通信与有线通信的根本区别。
*   **重点记忆**：
    *   **衰减 (Attenuation / Fading)**：信号强度随距离增加而减弱 (路径损耗 `~ (fd)²`)。频率越高、距离越远，损耗越大。
    *   **多径传播 (Multipath Propagation)**：信号经不同路径反射到达接收端，造成信号模糊和码间干扰 (ISI)。
    *   **干扰 (Interference)**：来自其他无线源的干扰，导致信噪比 (SNR) 下降。**SNR是核心指标**，SNR越高，误码率 (BER) 越低。
    *   **隐藏终端问题 (Hidden Terminal Problem)**：一个非常经典的考点。
        *   **场景**：节点A和C都能与B通信，但A和C之间互相听不到。
        *   **问题**：A和C可能同时向B发送数据，在B处产生冲突，而A和C自身却无法感知到。

#### **3. 无线MAC协议 - IEEE 802.11 (WiFi)**
*   **考点**：**CSMA/CA (载波侦听多路访问 / 冲突避免)** 是绝对的重点。
*   **重点记忆**：
    *   **为什么是CA (避免) 而不是CD (检测)**？
        1.  无线环境中，由于信号衰减，很难检测到微弱的碰撞信号 (信号强度可能远小于自己的发送信号)。
        2.  存在隐藏终端问题，无法在所有情况下感知到冲突。
    *   **RTS/CTS 交换机制 (如何实现冲突避免)**：
        1.  **目的**：解决隐藏终端问题。
        2.  **过程**：
            *   发送方 (A) 先发送一个短的 **RTS (请求发送)** 帧。
            *   AP (或接收方B) 收到后，广播一个 **CTS (清除发送)** 帧。
            *   所有能听到CTS的节点 (包括隐藏终端C) 都会在指定时间内保持静默，从而为A的正式数据传输“预留”信道。
            *   A发送数据，B回复ACK。
        *   这是一个“先预约，后通话”的机制。

#### **4. 802.11 帧格式 (Frame Addressing)**
*   **考点**：理解为什么802.11帧需要**多达4个地址字段**，并能说出在典型场景下各地址的作用。
*   **重点记忆**：
    *   与以太网帧 (只有源/目的MAC地址) 不同，802.11帧需要处理无线到有线网络的转换。
    *   **典型场景 (H1通过AP连接到路由器R1)**：
        *   **地址1 (接收方)**：AP的MAC地址 (无线链路的接收者)。
        *   **地址2 (发送方)**：H1的MAC地址 (无线链路的发送者)。
        *   **地址3 (目的方)**：R1的MAC地址 (数据包的最终目的地)。
    *   **地址4**：仅在Ad hoc模式下使用。

---

### **第二部分：移动性管理 (Mobility Management)**

这部分考察当设备从一个网络移动到另一个网络时，如何维持其通信。

#### **1. 基本概念 (Home & Visited Network)**
*   **考点**：区分**归属网络**和**拜访网络**。
*   **重点记忆**：
    *   **归属网络 (Home Network)**：你签约的运营商网络。它拥有你的身份信息、服务套餐等 (存储在 **HSS - 归属用户服务器**)。
    *   **拜访网络 (Visited Network)**：你漫游时临时接入的网络。它为你提供网络服务，但认证、计费等仍需通过归属网络。

#### **2. 移动IP路由 (Indirect vs. Direct Routing)**
*   **考点**：这是移动性管理的核心，**必须掌握两种路由方式的原理、流程和优缺点**。
*   **重点记忆**：
    *   **间接路由 (Indirect Routing)**
        *   **核心思想**：对通信方透明，所有数据包先发往归属网络。
        *   **流程**：
            1.  **通信方 (Correspondent)** 将数据包发往移动设备的**永久地址 (归属地址)**。
            2.  **归属代理 (Home Agent)** 截获该数据包。
            3.  归属代理查询HSS得知移动设备当前位置，并通过**隧道 (Tunneling)** 技术将原始数据包封装后转发给**外部代理 (Foreign Agent)**。
            4.  外部代理解封后，将数据包交给移动设备。
        *   **优点**：对通信方完全透明，移动性由网络内部处理。
        *   **缺点**：**三角路由 (Triangle Routing)** 问题，路径效率低下。

    *   **直接路由 (Direct Routing)**
        *   **核心思想**：通信方直接将数据包发往移动设备的当前位置。
        *   **流程**：
            1.  **通信方** 先向**归属代理**查询移动设备的**当前地址 (转交地址)**。
            2.  归属代理回复该地址。
            3.  通信方直接将数据包发往该转交地址。
        *   **优点**：路由路径最优，没有三角路由问题。
        *   **缺点**：对通信方不透明，需要其支持查询转交地址的机制；移动设备切换网络时，需要通知通信方。

### **第八章：网络安全 (Security)**

*   **[考点] 安全属性**：机密性 (Confidentiality)、认证 (Authentication)、完整性 (Message Integrity)、可用性 (Availability)。

*   **[考点] 加密技术**
    *   **对称密钥加密 (Symmetric Key Cryptography)**：
        *   收发双方共享同一密钥。
        *   优点：速度快。
        *   缺点：**密钥分发 (key distribution)** 困难。
    *   **公钥加密 (Public Key Cryptography)**：
        *   使用公钥/私钥对。公钥公开，私钥保密。
        *   用**公钥加密**，用对应的**私钥解密**。
        *   代表算法：**RSA**。
        *   解决了密钥分发问题。
        *   **另一个重要性质**：用私钥加密（签名），用公钥解密（验证）。`K-(K+(m)) = K+(K-(m))`

*   **[考-点] 完整性与认证**
    *   **报文摘要 (Message Digest)**：使用**哈希函数 (Hash Function)** 生成固定长度的摘要。哈希函数是单向的。
    *   **数字签名 (Digital Signature)**：
        *   **目的**：提供**认证**和**报文完整性**。
        *   **过程**：发送方用自己的**私钥**对报文的**哈希值**进行加密。
        *   **验证**：接收方用发送方的**公钥**解密签名，得到哈希值，并与自己计算的哈希值对比。**（P191的图必须掌握）**

*   **[考点] 证书颁发机构 (Certification Authority, CA)**
    *   **目的**：解决“如何信任一个公钥确实属于它声称的实体”的问题。
    *   CA将一个实体的身份和其公钥绑定在一起，并用CA自己的私钥对这个绑定关系进行数字签名，形成**数字证书 (digital certificate)**。

*   **[考点] TLS (Transport Layer Security)**
    *   在传输层之上提供安全服务，是HTTPS的基础。
    *   **综合运用了所有安全技术**：
        1.  **对称加密**：用于加密实际的应用数据（效率高）。
        2.  **公钥加密**：用于在握手阶段安全地协商对称密钥和进行服务器认证。
        3.  **数字证书**：用于验证服务器的身份。
        4.  **哈希函数(MAC)**：用于保证报文的完整性。

---

祝你期末考试顺利！复习时，对着这份大纲，把每一条都吃透，尤其是标记为**[考点]**的内容，争取做到能用自己的话清晰地描述出来。